{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  datetimePicker: document.querySelector('#datetime-picker'),\n  btnStart: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate = null;\nlet initialDate = new Date();\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: initialDate,\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    initialDate = new Date();\n    const isDateValid = userSelectedDate - initialDate > 0;\n    isDateValid ? (refs.btnStart.disabled = false) : showNotification();\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction showNotification() {\n  refs.btnStart.disabled = true;\n  iziToast.error({\n    message: 'Please choose a date in the future',\n    position: 'topRight',\n    class: 'error',\n    color: 'white',\n    timeout: 3000,\n  });\n}\n\nrefs.btnStart.addEventListener('click', countDown);\n\nfunction countDown() {\n  refs.btnStart.disabled = true;\n  refs.datetimePicker.disabled = true;\n  let time = userSelectedDate - initialDate;\n\n  const timer = setInterval(() => {\n    const date = convertMs(time);\n    const { days, hours, minutes, seconds } = date;\n    refs.days.innerHTML = days;\n    refs.hours.innerHTML = hours;\n    refs.minutes.innerHTML = minutes;\n    refs.seconds.innerHTML = seconds;\n    time -= 1000;\n    if (time <= 0) {\n      refs.datetimePicker.disabled = false;\n      clearInterval(timer);\n      return\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n"],"names":["refs","userSelectedDate","initialDate","options","selectedDates","showNotification","flatpickr","iziToast","countDown","time","timer","date","convertMs","days","hours","minutes","seconds","ms","addLeadingZero","value"],"mappings":"2GAKA,MAAMA,EAAO,CACX,eAAgB,SAAS,cAAc,kBAAkB,EACzD,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEA,IAAIC,EAAmB,KACnBC,EAAc,IAAI,KAEtB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAaD,EACb,gBAAiB,EACjB,QAAQE,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClCF,EAAc,IAAI,KACED,EAAmBC,EAAc,EACtCF,EAAK,SAAS,SAAW,GAASK,EAAgB,CAClE,CACH,EAEAC,EAAU,mBAAoBH,CAAO,EAErC,SAASE,GAAmB,CAC1BL,EAAK,SAAS,SAAW,GACzBO,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACV,MAAO,QACP,MAAO,QACP,QAAS,GACb,CAAG,CACH,CAEAP,EAAK,SAAS,iBAAiB,QAASQ,CAAS,EAEjD,SAASA,GAAY,CACnBR,EAAK,SAAS,SAAW,GACzBA,EAAK,eAAe,SAAW,GAC/B,IAAIS,EAAOR,EAAmBC,EAE9B,MAAMQ,EAAQ,YAAY,IAAM,CAC9B,MAAMC,EAAOC,EAAUH,CAAI,EACrB,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAM1C,GALAX,EAAK,KAAK,UAAYa,EACtBb,EAAK,MAAM,UAAYc,EACvBd,EAAK,QAAQ,UAAYe,EACzBf,EAAK,QAAQ,UAAYgB,EACzBP,GAAQ,IACJA,GAAQ,EAAG,CACbT,EAAK,eAAe,SAAW,GAC/B,cAAcU,CAAK,EACnB,MACD,CACF,EAAE,GAAI,CACT,CAEA,SAASE,EAAUK,EAAI,CAQrB,MAAMJ,EAAOK,EAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAE1CH,EAAQI,EAAe,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAEpDF,EAAUG,EAAe,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjED,EAAUE,EACd,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}